<mvc:View controllerName="sapui5agendar.sco00pickingdespacho_html.controller.View1"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:uit="sap.ui.table"
    xmlns:dnd="sap.ui.core.dnd"
    xmlns:l="sap.ui.layout"
    xmlns:unified="sap.ui.unified"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
    <Shell id="shell">
        <App id="app">
            <pages>
                <Page title="{i18n>title}">
                    <content>

                        <f:Form id="FormChange356" editable="true">
                            <f:title>
                                <core:Title text="Seleccione tipo de Recepción" />
                            </f:title>
                            <f:layout>
                                <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="4" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Recepción de Importación">
                                            <f:fields>
                                                <RadioButton select="irImport" />
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Recepción de Traslados">
                                            <f:fields>

                                                <RadioButton select="irTraslado" />

                                            </f:fields>
                                        </f:FormElement>


                                    </f:formElements>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>


                        <f:Form id="FormChange354" editable="true">
                            <f:title>
                                <core:Title text="Ingresar Parámetros de Selección" />
                            </f:title>
                            <f:layout>
                                <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="4" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement id="elemVariable" label="Entrega de Salida">
                                            <f:fields>
                                                <Input value="" id="idInputPto" placeholder="Ingrese una entrega..." showValueHelp="true">
                                                    <layoutData>
                                                        <l:GridData span="XL4 L4 M4 S10" />
                                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Centro">
                                            <f:fields>

                                                <ComboBox placeholder="Seleccione Centro">
                                                    <core:Item key="1" text="ISA1 - Salfa S.A. Vespucio" />
                                                    <core:Item key="1" text="ISA2 - Salfa S.A. OSSA" />
                                                </ComboBox>

                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Almacén">
                                            <f:fields>


                                                <ComboBox placeholder="Seleccione Almacén">
                                                    <core:Item key="1" text="NEUM - Neumáticos" />
                                                </ComboBox>

                                            </f:fields>
                                        </f:FormElement>

                                    </f:formElements>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>


                        <BusyDialog id="bd" title="Por favor espere..." text=""/>



                        <Dialog id="idDialogEnt" visible="false" state="Success" icon="sap-icon://shipping-status" class="sapContrast sapContrastPlus" title="Picking" contentWidth="100%" contentHeight="100%">
                            <Panel width="auto" class="sapUiResponsiveMargin" accessibleRole="Region">
                                <content>
                                    <Input value="" submit="onPickMaterial" visible="false" id="idInputHidden" placeholder="Scan Neumático..." />
                                    <ProgressIndicator visible="false" id="idPB" percentValue="{modelData>/porcentaje}" displayValue="{modelData>/cantidadConteo}/{modelData>/cantidad}" showValue="true" state="{modelData>/estado}"/>
                                    <uit:Table id="table" visible="false" enableGrouping="true" alternateRowColors="true" rows="{pickModel>/results}" selectionMode="Single" visibleRowCount="5" ariaLabelledBy="title">
                                        <uit:toolbar>
                                            <Toolbar>
                                                <Title id="title" text="Entrega 83849390 - SUBARU CHILE S.A." />
                                                <ToolbarSpacer/>


                                                <Button text="Confirmar" type="Accept" icon="sap-icon://supplier" press="confirmarEntrega"/>
                                            </Toolbar>
                                        </uit:toolbar>
                                        <uit:rowSettingsTemplate>
                                            <uit:RowSettings highlight="Success"/>
                                        </uit:rowSettingsTemplate>
                                        <uit:columns>
                                            <uit:Column width="6%">
                                                <Label text="Código SAP"/>
                                                <uit:template>
                                                    <Text text="{pickModel>material}" wrapping="true"/>
                                                </uit:template>
                                            </uit:Column>
                                            <uit:Column width="6%" visible="false">
                                                <Label text="MATERIAL"/>
                                                <uit:template>
                                                    <Text text="{pickModel>material}" wrapping="false"/>
                                                </uit:template>
                                            </uit:Column>
                                            <uit:Column width="11%">
                                                <Label text="TEXTO BREVE MATERIAL"/>
                                                <uit:template>
                                                    <Text text="{pickModel>textoMaterial}" wrapping="true"/>
                                                </uit:template>
                                            </uit:Column>
                                            <uit:Column width="4%" visible="false">
                                                <Label text="CTD"/>
                                                <uit:template>
                                                    <Text text="{pickModel>cantidad}" wrapping="false"/>
                                                </uit:template>
                                            </uit:Column>
                                            <uit:Column width="35%">
                                                <Label text="CTD CONTEO"/>
                                                <uit:template>
                                                    <ProgressIndicator percentValue="{pickModel>porcentaje}" displayValue="{pickModel>cantidadConteo}/{pickModel>cantidad}" showValue="true" state="{pickModel>estado}"/>

                                                </uit:template>
                                            </uit:Column>
                                            <uit:Column width="1%">
                                                <Label text="UMB"/>
                                                <uit:template>
                                                    <Text text="{pickModel>umb}" wrapping="false"/>
                                                </uit:template>
                                            </uit:Column>

                                        </uit:columns>
                                    </uit:Table>

                                    <List id="idList" visible="false" footerText="This is the footer text" items="{
			path: 'entModel>/results',
			sorter: {
				path: 'entModel>fecha',
				descending: false,
				group: true
			},
			groupHeaderFactory: '.getGroupHeader'
		}">
                                        <headerToolbar>
                                            <OverflowToolbar>
                                                <Title text="Entregas" />
                                                <ToolbarSpacer />
                                                <ToggleButton icon="sap-icon://menu" tooltip="Enable / Disable Custom Context Menu" press="onToggleContextMenu" />
                                            </OverflowToolbar>
                                        </headerToolbar>
                                        <StandardListItem title="{entModel>entrega}" description="{entModel>nombreCliente}" icon="{ProductPicUrl}" iconDensityAware="false" iconInset="false" />
                                    </List>



                                    <Table id="idTablaEnt" items="{
			path: 'entModel>/results',
			sorter: {
				path: 'entModel>fecha',
				descending: true,
				group: true
			},
			groupHeaderFactory: '.getGroupHeader'
		}" noDataText="Sin Datos" visible="true" class="sapContrast sapContrastPlus" showSeparators="All" growing="true" growingThreshold="20" growingScrollToLoad="true" width="100%">
                                        <columns>
                                            <Column width="10%" visible="true">
                                                <Text text="Entr"/>
                                            </Column>
                                            <Column width="8%" visible="true">
                                                <Text text="Cant"/>
                                            </Column>
                                            <Column width="8%" visible="true">
                                                <Text text="Clase"/>
                                            </Column>
                                            <Column width="20%" visible="true">
                                                <Text text="Cliente"/>
                                            </Column>
                                            <Column minScreenWidth="Tablet" demandPopin="true" visible="true">
                                                <Text text="Pto "/>
                                            </Column>
                                            <Column minScreenWidth="Tablet" demandPopin="true" visible="true">
                                                <Text text="Seleccionar"/>
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem visible="true">
                                                <cells>

                                                    <!--			<tnt:InfoLabel id="il4" text="{Ebeln}" renderMode="Loose" colorScheme="5" displayOnly= "true"/>-->
                                                    <ObjectStatus class="sapUiSmallMarginBottom" text="{entModel>entrega}"/>
                                                    <ObjectStatus class="sapUiSmallMarginBottom" text="{entModel>cantidad}" />
                                                    <ObjectStatus class="sapUiSmallMarginBottom" text="{entModel>clase}" />
                                                    <ObjectAttribute class="sapUiSmallMarginBottom" title="{entModel>nombreCliente}" text="{entModel>cliente}" />
                                                    <ObjectStatus class="sapUiSmallMarginBottom" text="{entModel>puerto}" />
                                                    <Button icon="sap-icon://{entModel>icon}" text="Picking" enabled="{entModel>boton}" type="{entModel>typeButton}" press="cargaPicking"/>
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>





                                    <f:Form id="idFormMaterial" visible="true" editable="false">
                                        <f:title>
                                            <core:Title text="Resultado SAP" />
                                        </f:title>
                                        <f:layout>
                                            <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="4" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false" />
                                        </f:layout>
                                        <f:formContainers>
                                            <f:FormContainer>
                                                <f:formElements>

                                                    <f:FormElement label="Estado">
                                                        <f:fields>
                                                            <ObjectStatus id="idEstadoScan" class="sapUiSmallMarginBottom" />
                                                        </f:fields>
                                                    </f:FormElement>

                                                    <f:FormElement label="Nº Pieza" visible="false">
                                                        <f:fields>
                                                            <Text text="" id="idPieza" />
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Código SAP">
                                                        <f:fields>
                                                            <Text text="" id="idMaterial"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Texto Breve">
                                                        <f:fields>
                                                            <Text text="" id="idTextoBreve"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Tipo Material" visible="false">
                                                        <f:fields>
                                                            <Text text="" id="idTipoMaterial"/>
                                                        </f:fields>
                                                    </f:FormElement>

                                                    <f:FormElement label="Creado Por" visible="false">
                                                        <f:fields>
                                                            <Text text="" id="idCreadoPor"/>
                                                        </f:fields>
                                                    </f:FormElement>


                                                    <f:FormElement label="CTD" visible="false">
                                                        <f:fields>
                                                            <Text text="" id="idCtd" />
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="CTD CONTEO">
                                                        <f:fields>
                                                            <ProgressIndicator id="idCtdConteo" percentValue="0" displayValue="" showValue="true" state="Error" />
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="UMB" visible="false">
                                                        <f:fields>
                                                            <Text text="" id="idUnidad" />
                                                        </f:fields>
                                                    </f:FormElement>


                                                </f:formElements>
                                            </f:FormContainer>
                                        </f:formContainers>
                                    </f:Form>




                                </content>
                            </Panel>

                            <beginButton>

                                <Button text="Incidente" icon="sap-icon://add" type="Emphasized" press="abrirIncidente"/>

                            </beginButton>
                            <endButton>
                                <Button text="Cerrar" type="Emphasized" press="cerrarDialog"/>
                            </endButton>
                        </Dialog>


                        <Dialog id="idDialogScan" visible="false" state="Success" icon="sap-icon://shipping-status" class="sapContrast sapContrastPlus" title="Listado Entregas" contentWidth="80%" contentHeight="80%">
                            <Panel width="auto" class="sapUiResponsiveMargin" accessibleRole="Region">
                                <content>

                                </content>
                            </Panel>

                            <endButton>
                                <Button text="Cerrar" type="Emphasized" press="cerrarDialog"/>
                            </endButton>
                        </Dialog>


                        <Dialog id="idDialogAccidente" visible="false" state="Success" icon="sap-icon://shipping-status" class="sapContrast sapContrastPlus" title="Crear Incidente" contentWidth="50%" contentHeight="80%">
                            <Panel width="auto" class="sapUiResponsiveMargin" accessibleRole="Region">
                                <content>
                                    <f:Form id="FormDDATOSGEN" editable="false">
                                        <f:title>
                                            <core:Title text="Formulario 80000013"/>
                                        </f:title>
                                        <f:layout>
                                            <f:ResponsiveGridLayout labelSpanXL="4" labelSpanL="3" labelSpanM="4" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="4" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false"/>
                                        </f:layout>
                                        <f:formContainers>
                                            <f:FormContainer title="">
                                                <f:formElements>
                                                    <f:FormElement label="Código SAP">
                                                        <f:fields>
                                                            <Input valueLiveUpdate="true" value="{/ListTransPort/Bstnk}" editable="true" showValueHelp="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Material">
                                                        <f:fields>
                                                            <Input valueLiveUpdate="true" value="{/ListTransPort/Name4} ({/ListTransPort/Name1})" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Descripción">
                                                        <f:fields>
                                                            <Input valueLiveUpdate="true" value="{/ListTransPort/Bedat}" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Caja">
                                                        <f:fields>
                                                            <Input id="idPatente" valueLiveUpdate="true" value="{/ListTransPort/Patente}" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Cant. Teórica">
                                                        <f:fields>
                                                            <Input id="nombreChofer" valueLiveUpdate="true" value="{/ListTransPort/NombreTransp}" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Cant. Real">
                                                        <f:fields>

                                                            <Input valueLiveUpdate="true" id="idTel" value="{path: '/ListTransPort/Telmov', formatter: 'zpptrackcdzpp_trackcd.controller.Formatter.formatCelular'}" editable="true"/>
                                                        </f:fields>

                                                    </f:FormElement>
                                                    <f:FormElement label="Motivo">
                                                        <f:fields>
                                                            <!--<Input valueLiveUpdate="true" value="{/ListTransPort/CtdOcCamion}" editable="false"/> -->
                                                            <Input valueLiveUpdate="true" value="" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>
                                                    <f:FormElement label="Detalle">
                                                        <f:fields>
                                                            <Input valueLiveUpdate="true" valueState="Error" valueStateText="Obligatorio" value="" editable="true"/>
                                                        </f:fields>
                                                    </f:FormElement>

                                                </f:formElements>
                                            </f:FormContainer>
                                        </f:formContainers>
                                    </f:Form>
                                </content>
                            </Panel>
                            <beginButton>
                                <Button text="Guardar" type="Accept" press="cerrarIncidente"/>
                            </beginButton>

                            <endButton>
                                <Button text="Cerrar" press="cerrarIncidente"/>
                            </endButton>
                        </Dialog>

                        <Dialog id="idDialogMaterial" visible="false" state="Success" icon="sap-icon://shipping-status" class="sapContrast sapContrastPlus" title="Material" contentWidth="100%" contentHeight="100%">
                            <Panel width="auto" class="sapUiResponsiveMargin" accessibleRole="Region">
                                <content>




                                </content>
                            </Panel>

                            <endButton>

                            </endButton>
                        </Dialog>


                    </content>
                    <footer>
                        <Toolbar>

                            <ToolbarSpacer/>
                            <Button text="Buscar" id="idBtnBuscar" press="cargaPicking" type="Accept" />
                            <Button id="idBtnRepetir" visible="false" press="onRepetir" text="Repetir Demo" icon="sap-icon://refresh" type="Accept" />

                        </Toolbar>
                    </footer>


                </Page>
            </pages>
        </App>
    </Shell>
</mvc:View>
