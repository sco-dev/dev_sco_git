<mvc:View xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:t="sap.ui.table"
    xmlns="sap.m"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="sapui5agendar.sco00consultadoctribu_html.controller.Master">
    <Shell id="shell">
        <App class="sapUiSizeCompact" id="app">
            <pages>
                <Page showHeader="false" enableScrolling="false" class="sapUiContentPadding">
                    <subHeader>
                        <Toolbar id="filters">
                            <Label class="sapUiSmallMarginBegin" text="Empresa: "/>
                            <Select class="sapUiTinyMarginBegin" items="{/empresas}" selectedKey="{/filters/selectedEmpresa}" change="handleEmpresaChange" width="10rem">
                                <layoutData>
                                    <ToolbarLayoutData shrinkable="true" />
                                </layoutData>
                                <core:Item key="{CODIGO}" text="{DESCRIPCION}"/>
                            </Select>

                            <Label class="sapUiSmallMarginBegin" text="Tipo Documento: "/>
                            <Select class="sapUiTinyMarginBegin" items="{/tiposDocumentos}" selectedKey="{/filters/selectedTipoDocumento}" change="handleTipoDocumentoChange" width="10rem">
                                <layoutData>
                                    <ToolbarLayoutData shrinkable="true" />
                                </layoutData>
                                <core:Item key="{CODIGO}" text="{DESCRIPCION}"/>
                            </Select>

                            <ToolbarSeparator/>
                            <Label class="sapUiSmallMarginBegin" text="Folio desde: "/>
                            <Input value="{/filters/folioDesde}" width="6rem" submit="handleSearch">
                                <layoutData>
                                    <ToolbarLayoutData shrinkable="true" />
                                </layoutData>
                            </Input>


                            <Label class="sapUiSmallMarginBegin" text="Folio hasta: "/>
                            <Input value="{/filters/folioHasta}" width="6rem" submit="handleSearch">
                                <layoutData>
                                    <ToolbarLayoutData shrinkable="true" />
                                </layoutData>
                            </Input>

                            <Button class="sapUiTinyMarginBegin" text="Seleccionar Folios" icon="sap-icon://inspect" press="handleOpenMultiselect"/>
                            <ToolbarSeparator/>

                            <Button class="sapUiTinyMarginBegin" text="Buscar" icon="sap-icon://search" press="handleSearch"/>
                        </Toolbar>
                    </subHeader>
                    <content>
                        <t:Table selectionBehavior="Row" visibleRowCount="10" class="sapUiSmallMargin sapUiSizeCompact" selectedIndex="{/selectedListadoIndex}" rows="{/documentos}" noData="No existen documentos, favor realice una bÃºsqueda" selectionMode="Single">
                            <t:columns>
                                <t:Column autoResizable="true">
                                    <Label text="Folio"/>
                                    <t:template>
                                        <Text text="{FOLIO}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Fecha"/>
                                    <t:template>
                                        <Text text="{
                                        path: 'FECHA_DOCUMENTO',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: {source: {pattern: 'yyyy-MM-dd'}, pattern: 'dd/MM/yyyy'}
                                    }" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Mon. Neto"/>
                                    <t:template>
                                        <Text text="{
                                		path: 'MONTO_NETO',
                                		type: 'sap.ui.model.type.Integer',
										formatOptions: {groupingEnabled:true}
                                	}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Mon. Exen."/>
                                    <t:template>
                                        <Text text="{
                                		path: 'MONTO_EXENTO',
                                		type: 'sap.ui.model.type.Integer',
										formatOptions: {groupingEnabled:true}
                                	}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Impto."/>
                                    <t:template>
                                        <Text text="{
                                		path: 'IMPUESTO',
                                		type: 'sap.ui.model.type.Integer',
										formatOptions: {groupingEnabled:true}
                                	}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Mon. Total."/>
                                    <t:template>
                                        <Text text="{
                                		path: 'MONTO_TOTAL',
                                		type: 'sap.ui.model.type.Integer',
										formatOptions: {groupingEnabled:true}
                                	}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Nombre Cliente"/>
                                    <t:template>
                                        <Text text="{NOMBRE_CLIENTE}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Rut Envia"/>
                                    <t:template>
                                        <Text text="{RUT_ENVIA}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Rut Recibe"/>
                                    <t:template>
                                        <Text text="{RUT_RECEPTOR}" wrapping="false"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Url Cliente"/>
                                    <t:template>
                                        <Button icon="sap-icon://pdf-attachment" press="handleURLCliente" app:empresa="{EMPRESA}" app:tipodocumento="{TIPO_DOCUMENTO}" app:folio="{FOLIO}" app:url="{URL_DOCU_CLIENTE}" app:flagurl="{FLAG_URL}"/>
                                    </t:template>
                                </t:Column>
                                <t:Column autoResizable="true">
                                    <Label text="Url Original"/>
                                    <t:template>
                                        <Button icon="sap-icon://pdf-attachment" press="handleURLOriginal" app:url="{URL_DOCU_ORIGINAL}" />
                                    </t:template>
                                </t:Column>
                            </t:columns>
                        </t:Table>
                    </content>
                    <footer>
                        <Toolbar>
                            <Button id="errorPopover" icon="sap-icon://message-popup" visible="{= ${message>/}.length > 0}" text="{= ${message>/}.length}" type="Emphasized" press="handleMessagePopoverPress"/>
                            <ToolbarSpacer/>
                        </Toolbar>
                    </footer>
                </Page>
            </pages>
        </App>
    </Shell>
</mvc:View>
